<!doctype html>
<html lang="pt-BR" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - YouTube Bot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              yt: {
                bg: "#0f0f0f",
                card: "#1e1e1e",
                text: "#f1f1f1",
                red: "#cc0000",
              },
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-yt-bg text-yt-text font-sans min-h-screen">
    <nav class="bg-yt-card border-b border-gray-800 p-4">
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <h1 class="text-xl font-bold text-red-600">Painel Administrativo</h1>
        <div class="flex gap-4">
          <a
            href="/admin/refunds"
            class="text-sm bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded"
          >
            Ver Reembolsos
          </a>
          <a href="/app" class="text-sm hover:text-white text-gray-400"
            >Voltar ao App</a
          >
          <button
            onclick="logout()"
            class="text-sm hover:text-white text-gray-400"
          >
            Sair
          </button>
        </div>
      </div>
    </nav>

    <main class="max-w-7xl mx-auto p-8">
      <div id="loading" class="text-center py-20">Carregando dados...</div>

      <div id="adminContent" class="hidden space-y-8">
        <!-- Configurações -->
        <div class="bg-yt-card p-6 rounded-xl border border-gray-800">
          <h2 class="text-lg font-bold mb-4">Configurações de Venda</h2>
          <div class="flex items-end gap-4">
            <div>
              <label class="block text-sm text-gray-400 mb-1"
                >Preço Mensalidade (R$)</label
              >
              <input
                type="number"
                id="priceInput"
                step="0.01"
                class="bg-[#121212] border border-gray-700 rounded p-2 text-white w-32"
              />
            </div>
            <button
              onclick="updatePrice()"
              class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded font-bold"
            >
              Salvar Preço
            </button>
          </div>
        </div>

        <!-- Lista de Usuários -->
        <div
          class="bg-yt-card p-6 rounded-xl border border-gray-800 overflow-x-auto"
        >
          <h2 class="text-lg font-bold mb-4">
            Usuários Cadastrados (<span id="userCount">0</span>)
          </h2>
          <table class="w-full text-left border-collapse">
            <thead>
              <tr class="text-gray-400 border-b border-gray-800 text-sm">
                <th class="p-3">UID / Email</th>
                <th class="p-3">Plano</th>
                <th class="p-3">Créditos</th>
                <th class="p-3">Uso Hoje</th>
                <th class="p-3">Cadastro</th>
              </tr>
            </thead>
            <tbody id="usersTableBody" class="text-sm">
              <!-- JS vai preencher -->
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="/static/js/firebase-config.js"></script>
    <script src="/static/js/admin.js"></script>
  </body>
</html>
